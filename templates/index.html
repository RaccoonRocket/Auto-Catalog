<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>AutoCatalog</title>
    <style>
        td {padding:5px;}
        button{margin: 5px;}
    </style>
    <link rel="stylesheet" href="./static/style.css">
</head>
<body>
    <h2>Список моделей</h2>
<!--    <div>-->
<!--        <input type="hidden" id="modelId" />-->
<!--        <p>-->
<!--            Модель:<br/>-->
<!--            <input id="modelName" />-->
<!--        </p>-->
<!--        <p>-->
<!--            Бренд:<br />-->
<!--            <input id="modelBrand" type="number" />-->
<!--        </p>-->
<!--         <p>-->
<!--            <button id="saveBtn">Сохранить</button>-->
<!--            <button id="resetBtn">Сбросить</button>-->
<!--        </p>-->
<!--    </div>-->
    <table>
        <thead><tr><th>Модель</th><th>Бренд</th><th>Описание</th><th>Фотокарточка</th></tr></thead>
        <tbody>
        </tbody>
    </table>

    <script>
        // Получение всех моделей
        async function getModels() {
            // отправляет запрос и получаем ответ
            const response = await fetch("/api/models", {
                method: "GET",
                headers: { "Accept": "application/json" }
            });
            // если запрос прошел нормально
            if (response.ok === true) {
                // получаем данные
                const models = await response.json();
                const rows = document.querySelector("tbody");
                // добавляем полученные элементы в таблицу
                models.forEach(model => rows.append(row(model)));
            }
        }
        // Создание строки для таблицы
        function row(model) {
            const tr = document.createElement("tr");
            tr.setAttribute("data-rowid", model[0]);

            const nameTd = document.createElement("td");
            nameTd.append(model[1]);
            tr.append(nameTd);

            const brandTd = document.createElement("td");
            brandTd.append(model[2]);
            tr.append(brandTd);

            const descriptionTd = document.createElement("td");
            descriptionTd.append(model[3]);
            tr.append(descriptionTd);

            const imageTd = document.createElement("td");
            const image = document.createElement("img");
            image.src = model[4]
            imageTd.appendChild(image);
            tr.appendChild(imageTd);
<!--            imageTd.append(model[4]);-->
<!--            tr.append(imageTd);-->

            return tr;
        }
        // Загрузка пользователей
        getModels();
    </script>
</body>
</html>
